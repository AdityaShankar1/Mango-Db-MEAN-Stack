<div style="min-height: 100vh; font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;">

  @if (isLoading) {
    <div class="d-flex flex-column justify-content-center align-items-center"
         style="height: 100vh; background: rgba(0,0,0,0.5); backdrop-filter: blur(5px);">
      <div class="spinner-grow text-warning" role="status" style="width: 4rem; height: 4rem;">
        <span class="visually-hidden">Loading...</span>
      </div>
      <h2 class="text-white mt-4 fw-bold" style="text-shadow: 2px 2px 10px rgba(0,0,0,0.5);">
        Gathering Mangoes...
      </h2>
    </div>
  }

  @else {
    <div style="min-height: 100vh; padding: 60px 20px; background: rgba(0,0,0,0.2);">

      <div class="container">
        <header class="text-center mb-5" role="banner">
          <h1 class="display-1 text-white fw-bold mb-0" style="text-shadow: 2px 4px 12px rgba(0,0,0,0.4);">
            ðŸ¥­ Mangodb
          </h1>
          <p class="lead text-white fw-bold opacity-75 mt-0" style="text-shadow: 1px 2px 5px rgba(0,0,0,0.5);">
            The Definitive Mango Compendium
          </p>

          <button (click)="toggleAdmin()"
                  class="btn btn-dark rounded-pill px-4 mt-3 shadow-lg border-0"
                  aria-label="Toggle Administrative Access">
            {{ isAdmin ? 'ðŸ”“ Logout Admin' : 'ðŸ”’ Admin Login' }}
          </button>
        </header>

        <main class="mt-5" role="main">
          @for (recipe of recipes; track recipe._id; let i = $index) {
            <article class="row align-items-center mb-5 glass-panel g-0 shadow-lg"
                     style="overflow: hidden; min-height: 380px;">

              <div class="col-md-6" [ngClass]="{'order-md-2': i % 2 !== 0}">
                <img [src]="recipe.image"
                     class="img-fluid w-100 h-100"
                     style="object-fit: cover; min-height: 380px;"
                     [alt]="recipe.title">
              </div>

              <div class="col-md-6 p-5" [ngClass]="{'order-md-1': i % 2 !== 0}">
                @if (isAdmin) {
                  <button (click)="removeRecipe(recipe._id)"
                          class="btn btn-sm btn-outline-danger float-end rounded-pill px-3"
                          [attr.aria-label]="'Delete ' + recipe.title">
                    Delete
                  </button>
                }

                <div class="display-4 mb-2" role="img" [attr.aria-label]="recipe.emoji + ' icon'">
                  {{ recipe.emoji }}
                </div>

                <h2 class="fw-bold text-dark display-6 mb-1">{{ recipe.title }}</h2>
                <hr class="w-25 border-warning border-3 opacity-100 mb-4">

                <p class="lead fw-bold text-dark mb-4" style="line-height: 1.6; font-size: 1.1rem;">
                  {{ recipe.description }}
                </p>

                <div class="d-flex gap-4">
                  <div>
                    <span class="d-block small fw-bold text-uppercase text-muted mb-1">Served</span>
                    <span class="badge bg-dark rounded-pill px-4 py-2 shadow-sm">{{ recipe.temp }}</span>
                  </div>
                  <div>
                    <span class="d-block small fw-bold text-uppercase text-muted mb-1">Palate</span>
                    <span class="badge bg-warning text-dark rounded-pill px-4 py-2 shadow-sm">{{ recipe.flavor }}</span>
                  </div>
                </div>
              </div>
            </article>
          }
        </main>

        @if (isAdmin) {
          <section class="mt-5 p-5 glass-admin rounded-4 shadow-lg text-start mx-auto"
                   style="max-width: 650px; border-bottom: 6px solid #ffc107;">

            <h3 class="fw-bold mb-4 text-center text-white">âœ¨ Add New Mango Masterpiece</h3>

            <div class="row g-3">
              <div class="col-12">
                <label class="form-label small fw-bold text-white-50">Dish Title</label>
                <input [(ngModel)]="newRecipe.title"
                       class="form-control bg-light border-0 py-2"
                       placeholder="e.g., Spicy Mango Chutney">
              </div>

              <div class="col-12">
                <label class="form-label small fw-bold text-white-50">Description</label>
                <textarea [(ngModel)]="newRecipe.description"
                          class="form-control bg-light border-0"
                          rows="3"
                          placeholder="Describe the texture, flavor, and history..."></textarea>
              </div>

              <div class="col-md-6">
                <label class="form-label small fw-bold text-white-50">Temperature</label>
                <select [(ngModel)]="newRecipe.temp" class="form-select bg-light border-0">
                  <option>Hot</option>
                  <option>Cold</option>
                </select>
              </div>

              <div class="col-md-6">
                <label class="form-label small fw-bold text-white-50">Flavor Profile</label>
                <select [(ngModel)]="newRecipe.flavor" class="form-select bg-light border-0">
                  <option>Sweet</option>
                  <option>Spicy</option>
                </select>
              </div>

              <div class="col-12 mt-4">
                <button (click)="submitRecipe()"
                        class="btn btn-warning btn-lg w-100 fw-bold py-3 shadow-sm">
                  ðŸš€ Publish to the Matrix
                </button>
              </div>
            </div>
          </section>
        }

        <footer class="mt-5 pb-5 text-center text-white-50 small">
          <p>&copy; 2025 Mangodb Compendium. Built with Angular, Node, and Docker.</p>
        </footer>
      </div>
    </div>
  }
</div>
